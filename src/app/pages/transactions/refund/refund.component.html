<div class="row mb-4">
    <div class="col-xl-10">
        <div class="w-25 TM-searchBar">
            <nz-input-group nzSize="large" [nzPrefix]="suffixIconSearch">
                <input type="text" nz-input [(ngModel)]="search"
                    placeholder="Search for Payments" />
            </nz-input-group>
            <ng-template #suffixIconSearch>
                <i nz-icon nzType="search"></i>
            </ng-template>
        </div>
    </div>
    <div class="col-xl-2 ">
        <a nz-button class="float-right" nzType="primary" (click)="openModal()" >
           Issue a refund </a>
    </div>
</div>

    <div class="row">
        <div class="col-xl-12 ">
            <nz-table class="card" #rowSelectionTable [nzData]="listData" [nzNoResult]="noData" nzShowSizeChanger
                [nzPageSize]="pageSize">
                <thead>
                    <tr>
                        <th class="ant-table-selection-column" [nzSortFn]="sortNumbersFn" (click)="sortOn('index')">#
                        </th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('date')"> Refund date</th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('salesAgent')"> Sales agent  </th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('policyNumber')"> Policy number  </th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('insuranceType')"> Insurance yype  </th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('vehicle')"> Vehicle </th>
                        <th [nzSortFn]="sortNumbersFn" (click)="sortOn('transactionReferenceNumber')">Transaction reference number</th>

                        <th [nzSortFn]="sortNumbersFn" (click)="sortOn('amountForSalesAgent')">Amount given to sales agent</th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('memo')">Message on receipt</th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('account')">Refund Account</th>
                        <th [nzSortFn]="sortNumbersFn" (click)="sortOn('paymentMethod')"> Payment Method</th>
                        <th [nzSortFn]="sortNamesFn" (click)="sortOn('amount')">Refunded Amount to Agent</th>

                        <!-- <th>Phone Number</th> -->
                        <!-- <th [nzSortFn]="sortNamesFn" (click)="sortOn('lastLoggedIn')">Last Logged in</th> -->
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let data of rowSelectionTable.data; let i = index;"
                        >
                        <td>
                            {{data.index}}

                        </td>
                        <td>
                           {{data.refundDate | date}}
                        </td>
                        <td>{{data.salesAgent.displayNameAs}}</td>
                        <td>{{data.policyNumber}}</td>
                        <td>{{data.insuranceType.name}}</td>
                        <td>{{data.vehicle.name}}</td>
                        <td>{{data.transactionReferenceNumber}}</td>
                        <td>{{ data.creditAccount.name }}</td>
                        <td>{{ data.paymentMethod.name }}</td>
                        <td>{{ data.amount}}</td>


                    </tr>
                </tbody>
            </nz-table>
        </div>
    </div>


<ng-template #noData>
    <nz-empty class="m-5" [nzNotFoundImage]="'assets/images/no-data/no-team.svg'" [nzNotFoundContent]="noDataDescrp">
    </nz-empty>
</ng-template>
<nz-modal nzFooter="null" nzHeader="Issue a Refund Transaction" [nzCloseIcon]="cancelIcon"[nzBodyStyle] nzWidth="1000" [(nzVisible)]="isVisible" nzMaskClosable="false"  (nzOnCancel)="closeModal()">
  <div>
    <app-add-refund></app-add-refund>
  </div>
</nz-modal>
<ng-template #noDataDescrp>
    <div class="m-4">
        No Data Available.
        <a  (click)="showModal()" class="kit__utils__link">
            Receive New Payment
        </a>
    </div>
</ng-template>
<ng-template #cancelIcon>
  <div class="font-size-24">
    <i nz-icon nzType="close" nzTheme="outline" nz-tooltip></i>
  </div>

</ng-template>
